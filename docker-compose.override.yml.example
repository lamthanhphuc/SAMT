# ==============================================
# DOCKER COMPOSE OVERRIDE (LOCAL DEVELOPMENT ONLY!)
# ==============================================
# 
# ⚠️  SECURITY WARNING: This file is for DEVELOPMENT use ONLY!
# ⚠️  DO NOT use this configuration in production environments!
# ⚠️  This file exposes database ports which creates security risks!
# 
# Usage:
# 1. Copy this file: cp docker-compose.override.yml.example docker-compose.override.yml
# 2. Use only in development: docker-compose up -d
# 3. NEVER deploy with these settings to production!
#
# This file automatically merges with docker-compose.yml
# Used to override config for local development convenience

version: "3.9"

services:
  
  # ==============================================
  # DEVELOPMENT: Code Hot Reload
  # ==============================================
  identity-service:
    volumes:
      - ./identity-service/target:/app
    environment:
      SPRING_DEVTOOLS_RESTART_ENABLED: "true"
    
  sync-service:
    volumes:
      - ./sync-service/target:/app
    environment:
      SPRING_DEVTOOLS_RESTART_ENABLED: "true"

  analysis-service:
    volumes:
      - ./analysis-service/target:/app
    environment:
      SPRING_DEVTOOLS_RESTART_ENABLED: "true"

  report-service:
    volumes:
      - ./report-service/target:/app
    environment:
      SPRING_DEVTOOLS_RESTART_ENABLED: "true"

  notification-service:
    volumes:
      - ./notification-service/target:/app
    environment:
      SPRING_DEVTOOLS_RESTART_ENABLED: "true"

  # ==============================================
  # DEVELOPMENT: Database Port Exposure  
  # ⚠️  WARNING: SECURITY RISK - Do not use in production!
  # ==============================================
  postgres-identity:
    ports:
      - "5432:5432"  # ⚠️ EXPOSED PORT - Dev only!

  postgres-core:
    ports:
      - "5433:5432"  # ⚠️ EXPOSED PORT - Dev only!

  postgres-projectconfig:
    ports:
      - "5434:5432"  # ⚠️ EXPOSED PORT - Dev only!

  postgres-usergroup:
    ports:
      - "5435:5432"  # ⚠️ EXPOSED PORT - Dev only!

  postgres-sync:
    ports:
      - "5436:5432"  # ⚠️ EXPOSED PORT - Dev only!
      
  # ==============================================
  # DEVELOPMENT: Redis Port Exposure
  # ⚠️  WARNING: SECURITY RISK - Dev debugging only!
  # ==============================================
  redis:
    ports:
      - "6379:6379"  # ⚠️ EXPOSED PORT - Dev only!

  # ==============================================
  # DEVELOPMENT: Enable Swagger UI
  # ⚠️  WARNING: Information disclosure - Dev only!
  # ==============================================
  api-gateway:
    environment:
      SWAGGER_ENABLED: "true"  # ⚠️ Enable Swagger for dev
      LOG_LEVEL: "DEBUG"       # ⚠️ Verbose logging for dev
